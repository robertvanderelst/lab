(function(e){"use strict";var t="",n="",r="",i="",s=1,o="",u="",a="";e.proforma={options:{prefix:"pf-",checkboxClass:"checkbox",radioClass:"radio",checkedClass:"checked",selectClass:"select",selectedClass:"selected",selectOptgroupClass:"select-optgroup",selectMainitemClass:"select-mainitem",selectSubitemClass:"select-subitem",multipleClass:"multiple",fileValueClass:"file_value",fileValueDefaultText:"No file selected",fileButtonClass:"file_select",fileButtonText:"Choose File"},elements:[]};e.fn.proforma=function(u){function f(e){if(e[0].tagName==="SELECT"){i="select"}if(e[0].tagName==="TEXTAREA"){i="textarea"}}function l(e,t){t=t.substring(t.lastIndexOf("\\")+1,t.length);t=t.substring(t.lastIndexOf("/")+1,t.length);e.parent().find("."+u.prefix+u.fileValueClass).text(t)}function c(e,t){e.find("option")[t].selected="selected";e.next().find("> span").html(e.find("option")[t].label);e.next().find("> ul").css({visibility:"hidden"})}function h(n,i){if(!/^text|textarea$/.test(i)){e(n).css({display:"none",visibility:"hidden"})}switch(i){case"checkbox":case"radio":t=u.prefix+u[i+"Class"];if(n.prop("checked")){t=t+" "+u.checkedClass}e(n).after('<span class="'+t+'" rel="'+n.attr("name")+'"></span>');n.parent().on("click",function(){if(i==="radio"){e("input[name='"+n.prop("name")+"']").each(function(){e(this).next().removeClass(u.checkedClass)})}if(e(this).find("input").prop("checked")){e(this).find("span").addClass(u.checkedClass)}else{e(this).find("span").removeClass(u.checkedClass)}});break;case"select":if(e(n).children().size()>0){e(n).after('<span class="'+u.prefix+u.selectClass+'"><span></span><ul></ul></span>');e(n).children().each(function(){if(e(this)[0].tagName==="OPTGROUP"&&e(this).children().size()>0){e(this).parents().find("."+u.prefix+u.selectClass+" > ul").append('<li class="'+u.prefix+u.selectOptgroupClass+'" rel="optgroup-'+s+'"><span>'+e(this).attr("label")+"</span><ul></ul></li>");e(this).children().each(function(){o="";if(e(this).prop("selected")){o=' class="'+u.selectedClass+'"'}e("."+u.prefix+u.selectClass+" > ul").find('li[rel="optgroup-'+s+'"] > ul').append('<li class="'+u.prefix+u.selectSubitemClass+'"><a href="#"'+o+' rel="index-'+e(this)[0].index+'">'+e(this).text()+"</a></li>")});s+=1}else{o="";if(e(this).prop("selected")){o=' class="'+u.selectedClass+'"'}if(e(this)[0].index===0){e(this).parents().find("."+u.prefix+u.selectClass+" > span").text(e(this)[0].label)}else{e(this).parents().find("."+u.prefix+u.selectClass+" > ul").append('<li class="'+u.prefix+u.selectMainitemClass+'"><a href="#"'+o+' rel="index-'+e(this)[0].index+'">'+e(this).text()+"</a></li>")}}})}e("."+u.prefix+u.selectClass+" > span").on("click",function(){e(this).next().css({visibility:"visible"})});e("."+u.prefix+u.selectClass).find("a").on("click",function(t){t.preventDefault();e("."+u.prefix+u.selectClass+" a").each(function(){e(this).removeClass(u.selectedClass)});e(this).addClass(u.selectedClass);a=e(this).prop("rel");a=a.substring(a.lastIndexOf("-")+1,a.length);c(n,a)});break;case"file":e(n).after('<div class="file"><div class="'+u.prefix+u.fileValueClass+'">'+u.fileValueDefaultText+'</div><a href="#select" class="'+u.prefix+u.fileButtonClass+'">'+u.fileButtonText+"</a></div>");e(n).next().find("a."+u.prefix+u.fileButtonClass).on("click",function(){e(n).trigger("click");r=e(n).val();if(r.length>0){l(n,r)}else{e(n).on("change",function(){l(n,e(n).val())})}});break}}u=e.extend(e.proforma.options,u);return this.each(function(){n=e(this);i=n.attr("type");f(n);h(n,i)})}})(jQuery)